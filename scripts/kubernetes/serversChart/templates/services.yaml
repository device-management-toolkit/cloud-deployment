#/*********************************************************************
# Copyright (c) Intel Corporation 2020
# SPDX-License-Identifier: Apache-2.0
#**********************************************************************/
apiVersion: v1
kind: Service
metadata:
  annotations:
    service.beta.kubernetes.io/azure-load-balancer-resource-group: {{ .Values.mps.resourceGroupName }}
  name: mps-load-balancer
spec:
  ports:
  - port: {{ .Values.mps.mpsPort }}
    name: mpsPort
  loadBalancerIP: {{ .Values.mps.staticIPAddress }}
  type: LoadBalancer
  selector:
    app: mps
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    service.beta.kubernetes.io/azure-load-balancer-resource-group: {{ .Values.mps.resourceGroupName }}
  name: ui-load-balancer
spec:
  ports:
  - port: {{ .Values.ui.port }}
    name: webUiPort
  selector:
    app: webui
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    service.beta.kubernetes.io/azure-load-balancer-resource-group: {{ .Values.mps.resourceGroupName }}
  name: rps-load-balancer
spec:
  ports:
  - port: {{ .Values.rps.rpswsPort }}
    name: rps
  - port: {{ .Values.rps.rpswebPort }}
    name: rpsweb
  selector:
    app: rps
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    service.beta.kubernetes.io/azure-load-balancer-resource-group: {{ .Values.mps.resourceGroupName }}
  name: kong-load-balancer
spec:
  ports:
  - port: {{ .Values.kong.uiPort }}
    name: ui
    targetPort: {{ .Values.kong.kongWebPort }}
  loadBalancerIP: {{ .Values.ui.staticIPAddress }}
  type: LoadBalancer
  selector:
    app: kong